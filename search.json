[{"path":"/articles/copernicus-cds.html","id":"register-for-cds-services","dir":"Articles","previous_headings":"","what":"1. Register for CDS services","title":"Copernicus Climate Data Store","text":"https://cds.climate.copernicus.eu/user/register","code":""},{"path":"/articles/copernicus-cds.html","id":"setting-access-rights","dir":"Articles","previous_headings":"","what":"2. Setting Access Rights","title":"Copernicus Climate Data Store","text":"Copy UUID API KEY : https://cds.climate.copernicus.eu/user Add R environment file calling usethis::edit_r_environ() add following two key value pairs R environment file: Restart R(Studio) now set access details shown :","code":"\"COPERNICUS_CLIMATE_UUID\" = \"myuuid\" \"COPERNICUS_CLIMATE_APIKEY\" = \"myapikey\" ecmwfr::wf_set_key(user = Sys.getenv(\"COPERNICUS_CLIMATE_UUID\"),                    key = Sys.getenv(\"COPERNICUS_CLIMATE_APIKEY\"),                    service = \"cds\")"},{"path":"/articles/copernicus-cds.html","id":"create-a-query","dir":"Articles","previous_headings":"","what":"4. Create a query","title":"Copernicus Climate Data Store","text":"Go : https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels?tab=form create query. Copy Rstudio -> mark -> goto Tools -> Addins -> Browse_Addins -> ecmwfr -> Python Mars -> order convert query R list (see: https://cran.r-project.org/web/packages/ecmwfr/vignettes/cds_vignette.html details)","code":""},{"path":"/articles/copernicus-cds.html","id":"run-your-query","dir":"Articles","previous_headings":"","what":"5. Run your query","title":"Copernicus Climate Data Store","text":"Take break wait request finished may take hours. check progress request visit: https://cds.climate.copernicus.eu/cdsapp#!/yourrequests","code":"request <- list(     product_type = \"reanalysis\",     dataset_short_name = \"reanalysis-era5-single-levels\",     file_format = \"grib\"     variable = \"2m_temperature\",     year = c(\"2010\", \"2011\", \"2012\", \"2013\", \"2014\",               \"2015\", \"2016\", \"2017\", \"2018\", \"2019\", \"2020\"),     month = c(\"01\", \"02\", \"03\", \"04\", \"05\", \"06\",                \"07\", \"08\", \"09\", \"10\", \"11\", \"12\"),     day = c(\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\",             \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\",             \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\"),     time = c(\"00:00\", \"01:00\", \"02:00\", \"03:00\", \"04:00\", \"05:00\", \"06:00\",              \"07:00\", \"08:00\", \"09:00\", \"10:00\", \"11:00\", \"12:00\", \"13:00\",              \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"18:00\", \"19:00\", \"20:00\",              \"21:00\", \"22:00\", \"23:00\"),     area = c(40, 116, 39, 117),     target =  \"download.grib\")     ecmwfr::wf_request(request = request,                      transfer = TRUE,                      path = export_dir,                      verbose = FALSE)"},{"path":"/articles/copernicus-cds.html","id":"load-raster-data","dir":"Articles","previous_headings":"5. Run your query","what":"6. Load raster data","title":"Copernicus Climate Data Store","text":"","code":"grib_file <- \"download.grib\"  meta <- kwb.satellite::get_metadata_era5(grib_file)  temperature <- raster::raster(grib_file)"},{"path":"/articles/google-earth-engine.html","id":"install-r-packages","dir":"Articles","previous_headings":"","what":"Install R packages","title":"Google Earth Engine","text":"","code":"pkgs_cran <- c(\"rgee\", \"reticulate\") install.packages(pkgs_cran, repos = \"https://cloud.r-project.org\")   ### Downgrade to last one supplied by R package \"rgee\" reticulate::py_install('earthengine-api==0.1.248')"},{"path":"/articles/google-earth-engine.html","id":"use","dir":"Articles","previous_headings":"","what":"Use","title":"Google Earth Engine","text":"","code":"library(rgee)  rgee::ee_Initialize() # it will work now!  createTimeBand <-function(img) {   year <- ee$Date(img$get('system:time_start'))$get('year')$subtract(1991L)   ee$Image(year)$byte()$addBands(img) }  img <- ee$ImageCollection('ECMWF/ERA5_LAND/HOURLY')$   filterBounds(ee$Geometry$Point(117, 40))$   select('total_precipitation')$   first()   vizParams <- list(   bands = 'total_precipitation',   min = 0,   max = 0.0000005,   gamma = 0.01 )  Map$setCenter(117, 40, 10)  # You can see it m1 <- Map$addLayer(img, vizParams, 'first') m1"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Michael Rustler. Author, maintainer. Hauke Sonnenberg. Contributor. . Funder. . Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Rustler M (2022). kwb.satellite: R Package Working Satellite Data Various Providers (Copernicus, GoogleEarthEngine). R package version 0.1.0, https://github.com/KWB-R/kwb.satellite.","code":"@Manual{,   title = {kwb.satellite: R Package for Working with Satellite Data from Various Providers (Copernicus, GoogleEarthEngine)},   author = {Michael Rustler},   year = {2022},   note = {R package version 0.1.0},   url = {https://github.com/KWB-R/kwb.satellite}, }"},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Package for Working with Satellite Data from Various\n    Providers (Copernicus, GoogleEarthEngine)","text":"installing latest release R package run following code :","code":"# Enable repository from kwb-r options(repos = c(   kwbr = 'https://kwb-r.r-universe.dev',   CRAN = 'https://cloud.r-project.org'))    # Download and install kwb.satellite in R install.packages('kwb.satellite')  # Browse the kwb.satellite manual pages help(package = 'kwb.satellite')"},{"path":"/index.html","id":"workflows","dir":"","previous_headings":"","what":"Workflows","title":"R Package for Working with Satellite Data from Various\n    Providers (Copernicus, GoogleEarthEngine)","text":"Copernicus Climate Data Google Earth Engine","code":""},{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 Kompetenzzentrum Wasser Berlin gGmbH (KWB) Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/reference/copernicus_cds.html","id":null,"dir":"Reference","previous_headings":"","what":"Copernicus Climate Data Store: Single Query — copernicus_cds","title":"Copernicus Climate Data Store: Single Query — copernicus_cds","text":"Run request (may take nothing happens many requests R queued (addition: maximum request data amount limited 140000 data points). check queue status: \"https://cds.climate.copernicus.eu/cdsapp#!/yourrequests?tab=form\"","code":""},{"path":"/reference/copernicus_cds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copernicus Climate Data Store: Single Query — copernicus_cds","text":"","code":"copernicus_cds(   variable = \"2m_temperature\",   dataset_short_name = \"reanalysis-era5-single-levels\",   product_type = \"reanalysis\",   years = as.character(seq(2010, 2020)),   area = c(40, 116, 39, 117),   file_format = \"grib\",   export_dir = \".\" )"},{"path":"/reference/copernicus_cds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copernicus Climate Data Store: Single Query — copernicus_cds","text":"variable variable query \"2m_temperature\" dataset_short_name \"reanalysis-era5-single-levels\" product_type default: \"reanalysis\" years character vector years (default:  .character(seq(2010, 2020))) area area coordinates latitude/longitude (default: c(40, 116, 39, 117)) file_format \"grib\" \"netcdf\" export_dir default: \".\"","code":""},{"path":"/reference/copernicus_cds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copernicus Climate Data Store: Single Query — copernicus_cds","text":"path file exported data","code":""},{"path":"/reference/copernicus_cds_parallel.html","id":null,"dir":"Reference","previous_headings":"","what":"Copernicus Climate Data Store: Multi Query — copernicus_cds_parallel","title":"Copernicus Climate Data Store: Multi Query — copernicus_cds_parallel","text":"Runs copernicus_cds parallel variables defined parameter \"variables\" machine cores minus one","code":""},{"path":"/reference/copernicus_cds_parallel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copernicus Climate Data Store: Multi Query — copernicus_cds_parallel","text":"","code":"copernicus_cds_parallel(   variables = c(\"2m_temperature\", \"evaporation\", \"potential_evaporation\",     \"precipitation_type\", \"runoff\", \"sub_surface_runoff\", \"surface_runoff\",     \"total_precipitation\"),   dataset_short_name = \"reanalysis-era5-single-levels\",   product_type = \"reanalysis\",   years = as.character(seq(2010, 2020)),   area = c(40, 116, 39, 117),   file_format = \"grib\",   export_dir = \".\" )"},{"path":"/reference/copernicus_cds_parallel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copernicus Climate Data Store: Multi Query — copernicus_cds_parallel","text":"variables default: c(\"2m_temperature\", \"evaporation\", \"potential_evaporation\", \"precipitation_type\", \"runoff\", \"sub_surface_runoff\", \"surface_runoff\", \"total_precipitation\") dataset_short_name \"reanalysis-era5-single-levels\" product_type default: \"reanalysis\" years character vector years (default:  .character(seq(2010, 2020))) area area coordinates latitude/longitude (default: c(40, 116, 39, 117)) file_format \"grib\" \"netcdf\" export_dir default: \".\"","code":""},{"path":"/reference/copernicus_cds_parallel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copernicus Climate Data Store: Multi Query — copernicus_cds_parallel","text":"list paths downloaded files","code":""},{"path":"/reference/get_metadata_era5.html","id":null,"dir":"Reference","previous_headings":"","what":"Copernicus: get metadata for ERA5 — get_metadata_era5","title":"Copernicus: get metadata for ERA5 — get_metadata_era5","text":"Copernicus: get metadata ERA5","code":""},{"path":"/reference/get_metadata_era5.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copernicus: get metadata for ERA5 — get_metadata_era5","text":"","code":"get_metadata_era5(grib_file)"},{"path":"/reference/get_metadata_era5.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copernicus: get metadata for ERA5 — get_metadata_era5","text":"grib_file path GRIB file","code":""},{"path":"/reference/get_metadata_era5.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copernicus: get metadata for ERA5 — get_metadata_era5","text":"metadata","code":""},{"path":[]},{"path":"/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"/news/index.html","id":"kwbsatellite-010-2022-05-20","dir":"Changelog","previous_headings":"","what":"kwb.satellite 0.1.0 2022-05-20","title":"kwb.satellite 0.1.0 2022-05-20","text":"R package two example workflows using: Copernicus Climate Data Google Earth Engine","code":""},{"path":"/news/index.html","id":"kwbsatellite-0009000","dir":"Changelog","previous_headings":"","what":"kwb.satellite 0.0.0.9000","title":"kwb.satellite 0.0.0.9000","text":"Added NEWS.md file track changes package. see https://style.tidyverse.org/news.html writing good NEWS.md","code":""}]
